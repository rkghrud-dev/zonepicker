<Window x:Class="ZoneRouter.UI.OverlayWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="ZoneRouter Overlay"
        WindowStyle="None" AllowsTransparency="True"
        Background="Transparent" Topmost="True"
        ShowInTaskbar="False" Left="0" Top="0">

    <Grid>
        <!-- 배경 (모드에 따라 흰색 or 검정) -->
        <Rectangle x:Name="DimBackground" IsHitTestVisible="False"/>

        <!-- Zone 색 블록 (편집 모드에서만) -->
        <Canvas x:Name="ZoneCanvas" IsHitTestVisible="False"/>

        <!-- 분할선 -->
        <Canvas x:Name="LineCanvas" IsHitTestVisible="False"/>

        <!-- Zone 하단 작업표시줄 (Zone 모드) -->
        <Canvas x:Name="ZoneBarCanvas" Background="Transparent"/>

        <!-- 드래그 핸들 (편집 모드) -->
        <Canvas x:Name="HandleCanvas" Background="Transparent"/>

        <!-- ─ 컨트롤 바 (항상 표시) ─ -->
        <Border x:Name="ControlBar"
                VerticalAlignment="Bottom" HorizontalAlignment="Right"
                Margin="0,0,20,20"
                Background="#EE1A1A2E" CornerRadius="10"
                BorderBrush="#55FFFFFF" BorderThickness="1"
                Height="56">
            <Grid>
            <!-- Zone 모드 컨트롤 -->
            <StackPanel x:Name="ZoneModeBar" Orientation="Horizontal"
                        Margin="10,0" VerticalAlignment="Center"
                        Visibility="Visible">

                <Button x:Name="BtnToggleMode" Width="110" Height="36"
                        Background="#2196F3" Foreground="White"
                        FontWeight="Bold" FontSize="12" BorderThickness="0"
                        Content="존 모드 ON" Click="BtnToggleMode_Click" Cursor="Hand"
                        Margin="0,0,6,0"/>

                <Button x:Name="BtnEnterEdit" Width="70" Height="36"
                        Background="#FF9800" Foreground="White"
                        FontWeight="Bold" FontSize="12" BorderThickness="0"
                        Content="존 편집" Click="BtnEnterEdit_Click" Cursor="Hand"
                        Margin="0,0,6,0"/>

                <TextBlock Text="밝기" Foreground="#99FFFFFF" FontSize="11"
                           VerticalAlignment="Center" Margin="0,0,4,0"/>
                <Slider x:Name="OpacitySlider" Width="70"
                        Minimum="0" Maximum="0.5" Value="0.12"
                        VerticalAlignment="Center" Margin="0,0,8,0"
                        ValueChanged="OpacitySlider_ValueChanged"/>

                <Button Content="✕" Width="26" Height="26"
                        Background="Transparent" Foreground="#88FFFFFF"
                        BorderThickness="0" FontSize="13"
                        Click="BtnExit_Click" Cursor="Hand"/>
            </StackPanel>

            <!-- 편집 모드 컨트롤 -->
            <StackPanel x:Name="EditModeBar" Orientation="Horizontal"
                        Margin="10,0" VerticalAlignment="Center"
                        Visibility="Collapsed">

                <Button x:Name="BtnDone" Width="70" Height="36"
                        Background="#4CAF50" Foreground="White"
                        FontWeight="Bold" FontSize="12" BorderThickness="0"
                        Content="✔ 완료" Click="BtnDone_Click" Cursor="Hand"
                        Margin="0,0,8,0"/>

                <!-- 존 추가 그룹 -->
                <Border BorderBrush="#44FFFFFF" BorderThickness="1"
                        CornerRadius="6" Padding="6,4" Margin="0,0,8,0">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="존 추가:" Foreground="#AAAACC"
                                   FontSize="11" VerticalAlignment="Center" Margin="0,0,6,0"/>
                        <Button x:Name="BtnAddPoint" Width="60" Height="28"
                                Background="#3F51B5" Foreground="White"
                                FontSize="11" BorderThickness="0"
                                Content="● 점" Click="BtnAddPoint_Click"
                                Cursor="Hand" Margin="0,0,4,0"
                                ToolTip="교차점 추가 (+4 Zone)"/>
                        <Button x:Name="BtnAddHLine" Width="60" Height="28"
                                Background="#009688" Foreground="White"
                                FontSize="11" BorderThickness="0"
                                Content="— 가로선" Click="BtnAddHLine_Click"
                                Cursor="Hand" Margin="0,0,4,0"
                                ToolTip="가로선 추가 (+2 Zone)"/>
                        <Button x:Name="BtnAddVLine" Width="60" Height="28"
                                Background="#009688" Foreground="White"
                                FontSize="11" BorderThickness="0"
                                Content="| 세로선" Click="BtnAddVLine_Click"
                                Cursor="Hand"
                                ToolTip="세로선 추가 (+2 Zone)"/>
                    </StackPanel>
                </Border>

                <Button Content="✕" Width="26" Height="26"
                        Background="Transparent" Foreground="#88FFFFFF"
                        BorderThickness="0" FontSize="13"
                        Click="BtnExit_Click" Cursor="Hand"/>
            </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>
